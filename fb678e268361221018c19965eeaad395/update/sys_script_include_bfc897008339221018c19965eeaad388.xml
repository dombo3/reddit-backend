<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_1298781_reddit_r.ScoreCalculator</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Caluclates the post score based on the vote table
|
Methods:
* initialize()</description>
        <mobile_callable>false</mobile_callable>
        <name>ScoreCalculator</name>
        <sandbox_callable>false</sandbox_callable>
        <script><![CDATA[var ScoreCalculator = Class.create();
ScoreCalculator.prototype = {
    initialize: function() {},

    calculateScore(postID) {
        if (!postID) {
            return undefined;
        }

        var vote = new GlideAggregate("x_1298781_reddit_r_vote");
        vote.groupBy("post");
        vote.addQuery("post", postID);
        vote.addAggregate("SUM", "value");
        vote.query();
        if (vote.next()) {
			var sum = vote.getAggregate("SUM", "value");
			return sum ? parseInt(sum, 10) : 0;
        }

        return 0;
    },

    type: 'ScoreCalculator'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-05-24 12:28:08</sys_created_on>
        <sys_id>bfc897008339221018c19965eeaad388</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>ScoreCalculator</sys_name>
        <sys_package display_value="Reddit - REST Backend" source="x_1298781_reddit_r">fb678e268361221018c19965eeaad395</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Reddit - REST Backend">fb678e268361221018c19965eeaad395</sys_scope>
        <sys_update_name>sys_script_include_bfc897008339221018c19965eeaad388</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-05-24 12:40:49</sys_updated_on>
    </sys_script_include>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>bfc897008339221018c19965eeaad388</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-05-24 12:28:06</sys_created_on>
        <sys_id>5a091f8c83f5221018c19965eeaad38c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-05-24 12:28:06</sys_updated_on>
        <table>sys_script_include</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
